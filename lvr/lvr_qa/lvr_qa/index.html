<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://umd-lhcb.github.io/ut-hw-doc/lvr/lvr_qa/lvr_qa/ rel=canonical><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.5.7"><title>LVR Setup/Initial QA - UMD UT hardware documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.b8ac9624.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.28f3ef9a.min.css><meta name=theme-color content=#ef5350><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=red data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#if-not-using-the-raspberry-pi-lvr-monitor class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://umd-lhcb.github.io/ut-hw-doc title="UMD UT hardware documentation" class="md-header-nav__button md-logo" aria-label="UMD UT hardware documentation"> <img src=../../../umd_logo.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> UMD UT hardware documentation </span> <span class="md-header-nav__topic md-ellipsis"> LVR Setup/Initial QA </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/umd-lhcb/ut-hw-doc/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> umd-lhcb/ut-hw-doc </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://umd-lhcb.github.io/ut-hw-doc title="UMD UT hardware documentation" class="md-nav__button md-logo" aria-label="UMD UT hardware documentation"> <img src=../../../umd_logo.png alt=logo> </a> UMD UT hardware documentation </label> <div class=md-nav__source> <a href=https://github.com/umd-lhcb/ut-hw-doc/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> umd-lhcb/ut-hw-doc </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Home <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Home data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. title="Getting started" class=md-nav__link> Getting started </a> </li> <li class=md-nav__item> <a href=../../../license/ title=License class=md-nav__link> License </a> </li> <li class=md-nav__item> <a href=../../../burnin/box_algorithm/ title=Boxes class=md-nav__link> Boxes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> DCB <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=DCB data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> DCB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../dcb/dcb_assembly/dcb_assembly/ title="DCB mechanical assembly" class=md-nav__link> DCB mechanical assembly </a> </li> <li class=md-nav__item> <a href=../../../dcb/dcb_qa/dcb_qa/ title="DCB QA" class=md-nav__link> DCB QA </a> </li> <li class=md-nav__item> <a href=../../../dcb/dcb_shipping/dcb_shipping/ title="DCB Shipping" class=md-nav__link> DCB Shipping </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> LVR <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=LVR data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> LVR </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../lvr_assembly/lvr_assembly/ title="LVR mechanical assembly" class=md-nav__link> LVR mechanical assembly </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> LVR Setup/Initial QA <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="LVR Setup/Initial QA" class="md-nav__link md-nav__link--active"> LVR Setup/Initial QA </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#if-not-using-the-raspberry-pi-lvr-monitor class=md-nav__link> If not using the raspberry Pi LVR monitor </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../qa_final/qa_final/ title="LVR Final QA" class=md-nav__link> LVR Final QA </a> </li> <li class=md-nav__item> <a href=../../lvr_config/lvr_config/ title="LVR Configuration" class=md-nav__link> LVR Configuration </a> </li> <li class=md-nav__item> <a href=../../ccm_id/ccm_id/ title="CCM Identification Guide" class=md-nav__link> CCM Identification Guide </a> </li> <li class=md-nav__item> <a href=../../ccm_test_stand_config/ccm_test_stand_config/ title="CCM Test Stand Configuration" class=md-nav__link> CCM Test Stand Configuration </a> </li> <li class=md-nav__item> <a href=../../ccm_qa/ccm_qa/ title="CCM QA" class=md-nav__link> CCM QA </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> MiniDAQ <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=MiniDAQ data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> MiniDAQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../minidaq/minidaq_usage/ title="MiniDAQ usage" class=md-nav__link> MiniDAQ usage </a> </li> <li class=md-nav__item> <a href=../../../minidaq/centos_tips/ title="CentOS tips" class=md-nav__link> CentOS tips </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Burn-in <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Burn-in data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Burn-in </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../burnin/burnin_hw_setup/burnin_hw_setup/ title="Burn-in hardware setup" class=md-nav__link> Burn-in hardware setup </a> </li> <li class=md-nav__item> <a href=../../../burnin/burnin_sw_setup/ title="Burn-in software setup" class=md-nav__link> Burn-in software setup </a> </li> <li class=md-nav__item> <a href=../../../burnin/lvr_operations/lvr_operations/ title="LVR burn-in operations" class=md-nav__link> LVR burn-in operations </a> </li> <li class=md-nav__item> <a href=../../../burnin/dcb_operations/ title="DCB burn-in operations" class=md-nav__link> DCB burn-in operations </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#if-not-using-the-raspberry-pi-lvr-monitor class=md-nav__link> If not using the raspberry Pi LVR monitor </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/umd-lhcb/ut-hw-doc/edit/master/docs/lvr/lvr_qa/lvr_qa.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>LVR Setup/Initial QA</h1> <div class="admonition info"> <p class=admonition-title>Before you proceed</p> <ul> <li> <p>Beware that <strong><code>TP5</code></strong> is <strong>NOT</strong> GND. The silkscreen label applies to the adjacent <strong><code>TP2</code></strong>.</p> </li> <li> <p>Caution is needed when connecting test lead clips to the test points. The test points are rather fragile and easily pulled of the board.</p> </li> <li> <p>Care must be taken to avoid temporary unintended shorts from the high density of surrounding components, vias, and traces.</p> </li> </ul> </div> <ol> <li> <p>Visually inspect a new LVR and place it on the holder as shown in the picture. The CCM side should be facing you and the input connector be at the top. Recall that the one input is on one end and the two outputs on the other. <img alt src=../lvr_setup_board.jpg></p> </li> <li> <p>Place an serial number sticker on a new LVR under the input connector, and document its serial number in the <a href="https://docs.google.com/spreadsheets/d/1KjXGhOFzi0SZPsozpKzxGjVtfr4kkS_Hv5EigUwKOj8/edit#gid=1564410083">database</a>. Also document which type of LVR you intend to QA (12MS, 12A, 12MSA, 15MS, 25A). </p> <ul> <li>You don't need to fill every column in the database as you complete that test until you finish the QA or leave the setup for any reason.</li> <li>The CCM serial number is documented at a later stage, during LVR assembly.</li> </ul> </li> <li> <p>Verify that the chassis and power ground are isolated by > 25k Ohms (often 180k Ohms)</p> <ol> <li>Measure the resistance between the lugs sticking out near the input connector and any <code>GND</code> test point on the board (eg. <strong><code>TP7</code></strong>)</li> <li>Repeat measurement reversing the polarity of leads (ground isolation circuit is different each way)</li> </ol> </li> <li> <p>Connect jumpers between <strong><code>J22</code></strong> (near ch8) pins 2 &amp; 4 (<code>V_pump</code>) and between <code>J22</code> pins 1 &amp; 3 (<code>V_jtag</code>). You can zoom in the above picture (righ-click, view image) to check it. This configuration allows you to program the FPGA later on.</p> </li> <li> <p>Connect the raspberry Pi LVR monitor to the board, and activate the LVR monitor on the laptop if it is not already running. If not using the Pi, you can follow the instructions at the bottom of the page.</p> <ol> <li>Go to PuTTY and select Monitor Pi</li> <li>Both user name and password are "<code>lvr</code>"</li> </ol> </li> <li> <p>Set the power supply initially to 1.6V and the current limited to 2.0A, and connect provided input breakout board. Verify polarity of connections visually</p> <ol> <li>Red wire in positive terminal of power supply</li> <li>Blue wire in negative terminal</li> <li>Negative terminal ground shorted</li> <li>Turn power supply on and enable output</li> </ol> </li> <li> <p>Adjust the <code>P1</code>, <code>P2</code>, and <code>P5</code> potentiometers so that the 1.5V, 3.3V, and 5.5V rails (voltage plateaus) are set to those values.</p> <ol> <li> <p>Slowly increase the input voltage from the initial 1.6V until either the 1.5V reading (<code>Vin_FPGA_1V5</code>) stops increasing or exceeds 1.5V. At this point, tune the output using P1 to set it to 1.5V. You may have to increase the voltage more and iterate the tuning process. An alternate approach is given in the tip below.</p> </li> <li> <p>Resume raising the input voltage and repeat this process on the 3.3V (<code>Vin_FPGA_3V3</code>) and 5.5V (<code>V_OPAMP_RAIL</code>) levels in the Pi LVR monitor. You should now be able to raise the input voltage all the way to 7V and the three readings should be stable.</p> </li> </ol> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p><strong>STOP IF VALUES BELOW ARE EXCEEDED</strong> to prevent damage.</p> <ul> <li>1.5V x 110% = 1.65V</li> <li>3.3V x 110% = 3.63V</li> <li><strong>The 5.5V rail (<code>Vop_rail</code>) should not exceed 5.5V!!</strong></li> </ul> <p>When the power supply reaches about 4.5V, the expected input current given by the supply at this point should be around 0.09A. If it is substantially more there may be a problem</p> </div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>It may be useful to let the rail approach the desired value from below as input voltage increases, then turn down the rail plateau to a value below the desired final plateau, and make the final adjustments by turning the input voltage and rail plateau values up simultaneously. Note that you can verify the rail has reached its plateau if you increase the input voltage and the rail voltage no longer increases.</p> </div> <div class="admonition info"> <p class=admonition-title>Desired values</p> <ul> <li>The 1.5V and 3.3V rails should be set to within 0.01V if possible.</li> <li>The 5.5V rail works in the 5.0-5.5V range, with a preference to be in the range 5.45-5.5V, as this allows for a slightly better time response.</li> </ul> </div> </li> <li> <p>Output standby configuration. Adjust the voltage offsets at the following test point pairs using the following potentiometers, using a multimeter to read the DC voltage.</p> <ul> <li>CH 4-1: <strong><code>TP9</code></strong> (<code>Vos_gen</code>) and <strong><code>TP10</code></strong> (GND)</li> <li>CH 8-5: <strong><code>TP14</code></strong> (<code>Vos_gen</code>) and <strong><code>TP15</code></strong> (GND)</li> </ul> <p>Adjust P3 and P4 on each respective side of the board in order to configure the voltages. (They are beside the testpoints)</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Each 4-channel group must be set to operate with the same output voltage according to what kind of CCM it will host as shown below (within a few mV):</p> <table> <thead> <tr> <th>Vos [V]</th> <th>Vccm [V]</th> </tr> </thead> <tbody> <tr> <td>1.775</td> <td>2.5</td> </tr> <tr> <td>1.546</td> <td>1.5</td> </tr> <tr> <td>1.483</td> <td>1.225</td> </tr> </tbody> </table> </div> </li> <li> <p>Program the FPGA</p> <ol> <li>Turn power off</li> <li>Connect programmer to <strong><code>J17</code></strong> on the back of the board, bottom-center (the ribbon in the picture below). Also make sure the blue jumpers are place in <code>J22</code> as in the picture. <img alt src=../lvr_jtag.jpg style=height:300px></li> </ol> </li> <li> <p>Turn power on (7V is still fine)</p> <ol> <li>Initiate the program sequence, opening FlashPro on the laptop if is not already running<ol> <li>If no program has been loaded onto the FPGA, go to Open Project and select the pre-loaded program in the LVR folder you want to run</li> <li>Go to Configure Device</li> <li>Click Browse, and select the file v2-03_lvr_fw.stp</li> <li>Set <strong>MODE</strong> to basic (should be default), and set <strong>ACTION</strong> to program</li> <li>Once that is complete, click <strong>PROGRAM</strong></li> </ol> </li> <li>Check in the log that the auto-verify ran successfully (<code>RUN PASSED</code> in green).</li> </ol> </li> <li> <p>Turn off power and install all 8 CCMs in the orientation that allows you to read the silkscreen as shown below. Remove the Raspberry Pi connector to install those. <img alt src=../ccm_board.jpg style=height:200px></p> <ul> <li>For an <code>MS</code> type LVR, set up master CCMs on odd channels, slaves on even.</li> <li>For an <code>A</code> type LVR, place stand-alone single master (<code>A</code>) CCMs on all channels.</li> <li>For <code>MSA</code> type, fill half the channels with <code>MS</code> (CH1-4 for instance) and half with <code>A</code> CCMs.</li> </ul> </li> <li> <p>Set dip switch configuration for undervoltage lockout and overtemp lockout (<code>ON</code> or <code>1</code> is setting the toggle toward the side that has <strong>ON</strong> printed on the switch)</p> <ol> <li> <p>Locate four dip switches SW6[A,B,C,D]. Set the 3<sup>rd</sup> switch to <strong>ON</strong>. Leave others <strong>OFF</strong>. These switches (and SW1) are circled in the image below.</p> <p><img alt src=../lvr_top_switches.png></p> </li> <li> <p>Locate the switch labeled SW1. Set the 4<sup>th</sup> switch to <strong>ON</strong>. Leave others <strong>OFF</strong>.</p> </li> <li> <p>Locate the SW2-5 switches on the back of the board along the top edge</p> <p><img alt src=../lvr_bottom_switches.png></p> <ol> <li>SW3 sets CH1-4 enabled. Set it to [<strong>ON, ON, ON, ON</strong>]</li> <li>SW2 sets CH5-8 enabled. Set it to [<strong>ON, ON, ON, ON</strong>]</li> <li>For SW4, for each channel pair that has a master-slave pair, set each corresponding pin to <strong>ON</strong> if a slave is present in the channel pair, otherwise set to <strong>OFF</strong></li> <li>Set SW5 to [<strong>ON, OFF, OFF, OFF</strong>] (channels come on immediately with power, output is constant rather than pulsed)</li> </ol> </li> <li> <p>Put on the Raspberry Pi connector. </p> </li> </ol> </li> <li> <p>Undervoltage Lockout test</p> <ol> <li>Set input power to ~4.8V, connect raspberry Pi LVR monitor and turn power on</li> <li>Reduce the input power gradually, and confirm that the outputs shut off (go to ~0V) below 4.5-4.6 volts (ish). After confirming this, turn the input power back to ~4.8V so that the outputs are on for the next test.</li> </ol> <div class="admonition info"> <p class=admonition-title>Info</p> <p>To test individual undervoltage lockouts (if needed) use the following procedure</p> <ol> <li> <p>Locate SW6[A, B, C, D]. The switcher-channel correspondence is given in the table below</p> </li> <li> <p>For each SW6#, verify that its corresponding channels shut off when turning the switch configuration to [<strong>OFF, OFF, OFF, OFF</strong>]</p> </li> <li> <p>Each channel should switch from some voltage (depending on power supply setting) to ~0V.</p> </li> </ol> <table> <thead> <tr> <th>SW6 switcher</th> <th>Channels</th> </tr> </thead> <tbody> <tr> <td>SW6A</td> <td>CH7 &amp; 8</td> </tr> <tr> <td>SW6B</td> <td>CH5 &amp; 6</td> </tr> <tr> <td>SW6C</td> <td>CH3 &amp; 4</td> </tr> <tr> <td>SW6D</td> <td>CH1 &amp; 2</td> </tr> </tbody> </table> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The output voltages in each channel will be slightly higher than that of the CCM voltage. 25 CCMs output ~2.7V, 15 output ~1.7 V, 12 output ~1.4 V</p> </div> </li> <li> <p>Overtemperature lockout test</p> <ol> <li>Locate SW1.</li> <li> <p>Set SW1 to [<strong>ON, ON, ON, ON</strong>].</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>This tells the board that it should shut down if it gets above ~ 20C (room temperature). You actually may already see overtemperature lockout occur when SW1 is set to [<strong>OFF, OFF, ON, ON</strong>], but still, perform this test by setting SW1 to [<strong>ON, ON, ON, ON</strong>].</p> </div> </li> <li> <p>Locate <strong><code>LD7</code></strong> (bottom left corner of LVR).</p> </li> <li>Verify <strong><code>LD7</code></strong> is <code>ON</code>.</li> <li>Verify all <code>V_OUT</code> channel values as shown on monitor go to ~0V.</li> <li>Set SW1 back to nominal [<strong>OFF, OFF, OFF, ON</strong>]</li> </ol> </li> <li> <p>Use the RJ45 breakout board to perform the sense line test. Verify that the voltage of a channel goes to RAIL when the corresponding sense lines are shorted to each other. The sense lines are mapped to the RJ45 as follows: <img alt src=../sense_line_board.jpg style=height:240px></p> <table> <thead> <tr> <th>Channels</th> <th>Pins</th> <th>RJ45 Connector</th> </tr> </thead> <tbody> <tr> <td>CH1</td> <td>1 &amp; 2</td> <td>Right (J10)</td> </tr> <tr> <td>CH2 (if 12/25A)</td> <td>4 &amp; 5</td> <td>Right (J10)</td> </tr> <tr> <td>CH3</td> <td>3 &amp; 6</td> <td>Right (J10)</td> </tr> <tr> <td>CH4 (if 12/25A)</td> <td>7 &amp; 8</td> <td>Right (J10)</td> </tr> <tr> <td>CH5</td> <td>1 &amp; 2</td> <td>Left (J16)</td> </tr> <tr> <td>CH6 (if 12/25A)</td> <td>4 &amp; 5</td> <td>Left (J16)</td> </tr> <tr> <td>CH7</td> <td>3 &amp; 6</td> <td>Left (J16)</td> </tr> <tr> <td>CH8 (if 12/25A)</td> <td>7 &amp; 8</td> <td>Left (J16)</td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Slave channels will not alter voltage when shorting those channels. They will only go to RAIL when shorting their respective master channels.</p> </div> </li> <li> <p>SPI Communication test</p> <ol> <li>On the laptop's desktop, locate the "SPI test". Run this shortcut.</li> <li>The username and password are both 'spitest'</li> <li>You will see a menu for options to send commands to the LVR. Try requesting the LVR status (first option) and verify that the response ends in 0xFFFF (all channels on). You can also request WORD2, which should end with 0x203 (the FW version) and try modifying the config to turn all the channels OFF and ON again.</li> <li>When you are satisfied the LVR is responding properly, connect the SPI_RESET line (floating green wire) to any GND test point on the LVR (the GND on the raspberry pi or the Rigol power supply also works in principle). The LVR should stop replying and you should read the response as all 00 00 00 00 no matter the command you send until you allow the SPI_RESET to float once more.</li> </ol> </li> <li> <p>If it is not already, set SW5 2<sup>nd</sup> switch to <strong>OFF</strong> (takes regulator out of pulsed mode).</p> </li> <li> <p>Switch off the power and disconnect everything from the board (excluding the jumpers placed on <strong><code>J22</code></strong>), and place colored stickers on the board near the CCM connectors to indicate which CCMs were used on the board during the QA.</p> </li> <li> <p>Make sure you update the <a href="https://docs.google.com/spreadsheets/d/1KjXGhOFzi0SZPsozpKzxGjVtfr4kkS_Hv5EigUwKOj8/edit#gid=1564410083">database</a> appropriately. <strong>You're done!</strong></p> </li> </ol> <h3 id=if-not-using-the-raspberry-pi-lvr-monitor>If not using the raspberry Pi LVR monitor</h3> <p>Place a DVM (DC Voltage Meter) between <strong><code>TP3</code></strong> (3.3V) and <strong><code>TP6</code></strong> (GND) to monitor the 3.3V rail, another DVM between <strong><code>TP8</code></strong> (1.5V) and <strong><code>TP6</code></strong> (GND) to monitor the 1.5V rail, and a third DVM between <strong><code>TP4</code></strong> (<code>Vop_rail</code>) and <strong><code>TP7</code></strong> (GND) to monitor the op amp rail. The first image below shows the location of <strong><code>TP3</code></strong>, <strong><code>TP6</code></strong>, and <strong><code>TP8</code></strong>, as well as potentiometers <strong><code>P1</code></strong> and <strong><code>P2</code></strong> that will be used to adjust the 1.5V and 3.3V rails. The second image shows the locations of <strong><code>TP4</code></strong>, <strong><code>TP7</code></strong>, and <strong><code>P5</code></strong> for the op amp rail.</p> <p><img alt src=../lvr_qa1.png></p> <p><img alt src=../lvr_qa2.png></p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../../lvr_assembly/lvr_assembly/ title="LVR mechanical assembly" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> LVR mechanical assembly </div> </div> </a> <a href=../../qa_final/qa_final/ title="LVR Final QA" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> LVR Final QA </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.d1f5a259.min.js></script> <script src=../../../assets/javascripts/bundle.d5fec882.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>