<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://umd-lhcb.github.io/ut-hw-doc/cern/cern_qa/cern_qa/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-7.1.5"><title>CERN QA - UMD UT hardware documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.bde7dde4.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ef6f36e2.min.css><meta name=theme-color content=#ef5552><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=red data-md-color-accent=indigo> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#dcb-cern-qa class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="UMD UT hardware documentation" class="md-header__button md-logo" aria-label="UMD UT hardware documentation" data-md-component=logo> <img src=../../../umd_logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> UMD UT hardware documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> CERN QA </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/umd-lhcb/ut-hw-doc/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> umd-lhcb/ut-hw-doc </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="UMD UT hardware documentation" class="md-nav__button md-logo" aria-label="UMD UT hardware documentation" data-md-component=logo> <img src=../../../umd_logo.png alt=logo> </a> UMD UT hardware documentation </label> <div class=md-nav__source> <a href=https://github.com/umd-lhcb/ut-hw-doc/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> umd-lhcb/ut-hw-doc </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Home <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Home data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Getting started </a> </li> <li class=md-nav__item> <a href=../../../faq/faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../../../license/ class=md-nav__link> License </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Backplane <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Backplane data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Backplane </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../backplane/backplane_depop/ class=md-nav__link> Backplane depopution </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> DCB <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=DCB data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> DCB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../dcb/dcb_assembly/dcb_assembly/ class=md-nav__link> DCB mechanical assembly </a> </li> <li class=md-nav__item> <a href=../../../dcb/dcb_qa/dcb_qa/ class=md-nav__link> DCB QA </a> </li> <li class=md-nav__item> <a href=../../../dcb/dcb_shipping/dcb_shipping/ class=md-nav__link> DCB Shipping </a> </li> <li class=md-nav__item> <a href=../../../dcb/dcb_prod_with_pathfinder/dcb_prod_with_pathfinder/ class=md-nav__link> Use production DCB with Pathfinder </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> LVR <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=LVR data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> LVR </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../lvr/lvr_assembly/lvr_assembly/ class=md-nav__link> LVR mechanical assembly </a> </li> <li class=md-nav__item> <a href=../../../lvr/lvr_qa/lvr_qa/ class=md-nav__link> LVR Setup/Initial QA </a> </li> <li class=md-nav__item> <a href=../../../lvr/qa_final/qa_final/ class=md-nav__link> LVR Final QA </a> </li> <li class=md-nav__item> <a href=../../../lvr/lvr_config/lvr_config/ class=md-nav__link> LVR Configuration </a> </li> <li class=md-nav__item> <a href=../../../lvr/ccm_id/ccm_id/ class=md-nav__link> CCM Identification Guide </a> </li> <li class=md-nav__item> <a href=../../../lvr/ccm_test_stand_config/ccm_test_stand_config/ class=md-nav__link> CCM Test Stand Configuration </a> </li> <li class=md-nav__item> <a href=../../../lvr/ccm_qa/ccm_qa/ class=md-nav__link> CCM QA </a> </li> <li class=md-nav__item> <a href=../../../lvr/lvr_shipping/lvr_shipping/ class=md-nav__link> LVR shipping </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> MiniDAQ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MiniDAQ data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> MiniDAQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../minidaq/minidaq_usage/ class=md-nav__link> MiniDAQ usage </a> </li> <li class=md-nav__item> <a href=../../../minidaq/centos_tips/ class=md-nav__link> CentOS tips </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Burn-in <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Burn-in data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Burn-in </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../burnin/burnin_hw_setup/burnin_hw_setup/ class=md-nav__link> Burn-in hardware setup </a> </li> <li class=md-nav__item> <a href=../../../burnin/burnin_sw_setup/ class=md-nav__link> Burn-in software setup </a> </li> <li class=md-nav__item> <a href=../../../burnin/lvr_operations/lvr_operations/ class=md-nav__link> LVR burn-in operations </a> </li> <li class=md-nav__item> <a href=../../../burnin/dcb_operations/ class=md-nav__link> DCB burn-in operations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Test stand documentation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Test stand documentation" data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Test stand documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../teststands/rpi-general/lvr-monitor-errata/ class=md-nav__link> LVR Monitor Hardware </a> </li> <li class=md-nav__item> <a href=../../../teststands/lvr-finalqa/finalqa-setup/ class=md-nav__link> LVR Final QA </a> </li> <li class=md-nav__item> <a href=../../../teststands/ccm-qa/ccmqa-setup/ class=md-nav__link> CCM QA </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8 checked> <label class=md-nav__link for=__nav_8> CERN <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CERN data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> CERN </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cern_pepi_installation_qa/cern_pepi_installation_qa/ class=md-nav__link> CERN PEPI installation QA </a> </li> <li class=md-nav__item> <a href=../../cern_visual_inspection/cern_visual_inspection/ class=md-nav__link> CERN visual inspection </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> CERN QA <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> CERN QA </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#dcb-cern-qa class=md-nav__link> DCB CERN QA </a> <nav class=md-nav aria-label="DCB CERN QA"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#remove-dcbs-from-pepi-crate class=md-nav__link> Remove DCBs from PEPI crate </a> </li> <li class=md-nav__item> <a href=#install-dcbs-to-pepi-crate class=md-nav__link> Install DCBs to PEPI crate </a> </li> <li class=md-nav__item> <a href=#use-the-dcb-qa-panel class=md-nav__link> Use the DCB QA panel </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lvr-cern-qa class=md-nav__link> LVR CERN QA </a> <nav class=md-nav aria-label="LVR CERN QA"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tcm-qa class=md-nav__link> TCM QA </a> </li> <li class=md-nav__item> <a href=#proposed-lvr-nominal-voltages class=md-nav__link> Proposed LVR nominal voltages </a> </li> <li class=md-nav__item> <a href=#update-lvr-firmware class=md-nav__link> Update LVR firmware </a> </li> <li class=md-nav__item> <a href=#install-tcm class=md-nav__link> Install TCM </a> </li> <li class=md-nav__item> <a href=#use-the-lvr-qa-panel class=md-nav__link> Use the LVR QA panel </a> </li> <li class=md-nav__item> <a href=#installing-lvr-to-sbc class=md-nav__link> Installing LVR to SBC </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_4 type=checkbox id=__nav_8_4> <label class=md-nav__link for=__nav_8_4> CERN Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CERN Installation" data-md-level=2> <label class=md-nav__title for=__nav_8_4> <span class="md-nav__icon md-icon"></span> CERN Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cern_installation/cern_dcb_depopulation/ class=md-nav__link> DCB depopulation </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#dcb-cern-qa class=md-nav__link> DCB CERN QA </a> <nav class=md-nav aria-label="DCB CERN QA"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#remove-dcbs-from-pepi-crate class=md-nav__link> Remove DCBs from PEPI crate </a> </li> <li class=md-nav__item> <a href=#install-dcbs-to-pepi-crate class=md-nav__link> Install DCBs to PEPI crate </a> </li> <li class=md-nav__item> <a href=#use-the-dcb-qa-panel class=md-nav__link> Use the DCB QA panel </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lvr-cern-qa class=md-nav__link> LVR CERN QA </a> <nav class=md-nav aria-label="LVR CERN QA"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tcm-qa class=md-nav__link> TCM QA </a> </li> <li class=md-nav__item> <a href=#proposed-lvr-nominal-voltages class=md-nav__link> Proposed LVR nominal voltages </a> </li> <li class=md-nav__item> <a href=#update-lvr-firmware class=md-nav__link> Update LVR firmware </a> </li> <li class=md-nav__item> <a href=#install-tcm class=md-nav__link> Install TCM </a> </li> <li class=md-nav__item> <a href=#use-the-lvr-qa-panel class=md-nav__link> Use the LVR QA panel </a> </li> <li class=md-nav__item> <a href=#installing-lvr-to-sbc class=md-nav__link> Installing LVR to SBC </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/umd-lhcb/ut-hw-doc/edit/master/docs/cern/cern_qa/cern_qa.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>CERN QA</h1> <h2 id=dcb-cern-qa>DCB CERN QA</h2> <div class="admonition note"> <p class=admonition-title>Note</p> <p>All these procedures are automated by a single WinCC OA panel, please refer to <a href=#use-the-dcb-qa-panel>this section</a> below on how to use it.</p> </div> <p>The DCB CERN QA will test the following aspects of 2 DCBs for a single run:</p> <ol> <li>Run regular GBTx PRBS test for 2 min.</li> <li>If there's any PRBS error in the previous step, re-run PRBS with 6 mA<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup> bias current for 2 min.</li> <li>Run SALT PRBS on available elinks<sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup> for 2 min.</li> <li>Read master GBTx status via optical link to make sure master is configurable this way.</li> <li>Read all ADC lines that will be used in the final system.</li> </ol> <h3 id=remove-dcbs-from-pepi-crate>Remove DCBs from PEPI crate</h3> <div class="admonition warning"> <p class=admonition-title>Before you proceed</p> <p>To appease the accelerator god(s), wear anti-static straps at all times and install caps on fibers immediately after removal.</p> <p><img align=left alt="Anti-static strap" src=../anti_static_strap-small.jpg></p> <p><img alt="Fiber with cap" src=../fiber_with_cap-small.jpg></p> </div> <div class="admonition info"> <p class=admonition-title>Open the MARATON control panel</p> <ol> <li>Make sure to have a LHCb online account</li> <li><code>ssh -Y &lt;lb_username&gt;@lbgw</code></li> <li><code>ssh -Y &lt;lb_username&gt;@utdaqlab1</code></li> <li><code>WCCOAui -proj UTLABHVLV -m gedi &amp;</code></li> <li>Open <strong>JCOP Framework</strong> -&gt; <strong>Device editor and navigator</strong> -&gt; <strong>FSM</strong> tab -&gt; <strong>UTLABMTN3</strong></li> </ol> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>We are only using the 2 DCB slots on the <strong>bottom</strong> Pathfinder.</p> </div> <ol> <li>Turn off bottom power<sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup> with the power panel on the MiniDAQ by clicking <strong>Bottom OFF</strong> (don't worry about the warning on the panel that this button is "only for testing").</li> <li>Turn off the 3V pull-up PSU: <img alt="3V pull-up PSU" src=../3v_pullup_psu.jpg></li> <li>Pull out DCBs one-by-one, then remove all fibers and FFC<sup id=fnref:4><a class=footnote-ref href=#fn:4>4</a></sup>. <img alt="FFC removal" src=../ffc_removal.jpg></li> </ol> <h3 id=install-dcbs-to-pepi-crate>Install DCBs to PEPI crate</h3> <ol> <li> <p>Install FFC to the DCB.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <ul> <li>The 2 FFCs are interchangeable.</li> <li>The FFC should be inserted to the second to right of the opt. mezz, when the copper pipes are pointing down (see the picture for FFC removal above).</li> <li>Try to do this step carefully, making an effort to ensure the FFC is straight and making good contact. This will potentially save time, since a bad FFC connection is often what causes a QA failure.</li> </ul> </div> </li> <li> <p>Install optical fibers to the DCB.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The left DCB slot is <code>JD0</code>, the right <code>JD4</code>. The topmost fiber (in the FFC removal picture above) is <code>1</code>.</p> <p>Therefore, <code>B0.4</code> means the 4th fiber from top in slot <code>JD0</code>.</p> </div> </li> <li> <p>Install DCB to the correct slot (the one with <code>B0.x</code> fibers <strong>must</strong> go to <code>JD0</code>, <code>B4.x</code> <code>JD4</code>).</p> </li> <li> <p>Double check the pull-up harnesses are still connected on the FFC breakout board. If not, reconnect them according to the picture below (red on third from top, black on fourth from top).</p> <p><img alt="FFC breakout board" src=../pull_up_cables.jpg></p> <p>Also make sure the other ends are still connected to the 3V pull-up PSU.</p> </li> <li> <p>Turn on the 3V pull-up PSU.</p> </li> <li>Turn on bottom power with the power panel by clicking <strong>Bottom ON</strong>.</li> </ol> <h3 id=use-the-dcb-qa-panel>Use the DCB QA panel</h3> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The panel looks like this:</p> <p><img alt="DCB CERN QA panel" src=../dcb_cern_qa_panel.png></p> <p>The <code>UTSLICETEST</code> project lives on <code>lbminidaq2-17</code>. To connect:</p> <pre><code>ssh -Y admin@lbminidaq2-17
</code></pre> </div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The log viewer can be launched from command line with:</p> <pre><code>WCCOAtoolLogViewer -proj UTSLICETEST &amp;
</code></pre> <p>The main user inteface, <code>gedi</code> can be opened with:</p> <pre><code>WCCOAui -proj UTSLICETEST -m gedi &amp;
</code></pre> </div> <ol> <li> <p>Once connected to <code>lbminidaq2-17</code>, launch the DCB CERN QA panel:</p> <pre><code>WCCOAui -proj UTSLICETEST -p objects/fwDCB/UT_DCB_CERN_QA.pnl &amp;
</code></pre> <div class="admonition warning"> <p class=admonition-title>Establish a working baseline</p> <p>Now it's a good time trying to read the status of master GBTx, to establish a working baseline.</p> <p>This can be done by clicking the <strong>Read master GBTx status</strong> on the <strong>Debug</strong> buttons.</p> <p>If you see one or two of the master status can't be read, like this:</p> <p><img alt="DCB CERN QA master problem" src=../dcb_test_prob.png></p> <p>then turn off powers and try <strong>reseating</strong> the FFC! It is very likely that the FFC is not making good contact!</p> <p>If after reseating and swapping FFCs, the master status still can't be read, put the board aside, mark it as bad, and install a new board.</p> </div> </li> <li> <p>Input the serial numbers for the 2 DCBs in the <strong>SN</strong> fields</p> </li> <li> <p>Click <strong>Start test</strong></p> <div class="admonition info"> <p class=admonition-title>In case the <em>Optimize hybrid elinks</em> fails</p> <p>The hybrid elinks optimization are more error-prone than the rest of the steps.</p> <p>One possibility is that the TFC NZS signal is not sent. To check that: <strong>TOP</strong> -&gt; <strong>SODIN</strong> -&gt; <strong>Core 0</strong> -&gt; <strong>Calibration A</strong> and make sure that <strong>make NZS</strong> option is ticked.</p> <p><strong>Update 09-17-21: Mark tried to fix this common failure by editing the panel; if it still fails, try power cycling, and then perhaps try restarting the GbtServ</strong> (run <code>pkill -9 GbtServ</code> then <code>GbtServ &amp;</code>).</p> </div> </li> <li> <p>Wait for it the test to finish.</p> </li> <li> <p>Take a look at the <strong>Test results</strong> section.</p> <ol> <li>If there's no red fields, then both of the DCBs are OK.</li> <li>If there's red, document the corresponding DCB as bad.</li> <li>All test results are also saved in a log file.</li> </ol> </li> </ol> <h2 id=lvr-cern-qa>LVR CERN QA</h2> <h3 id=tcm-qa>TCM QA</h3> <ol> <li>Take a new TCM and set switches 1 and 3 ON</li> <li>Take note of the TCM serial number and insert it into the testing apparatus, ensuring to be careful to not break or bend any pins when closing it</li> <li>Connect the TCM to the TCB via a Mini IO ethernet cable</li> <li>Turn on the power supply</li> <li> <p>Get to the TCM QA panel (while connected to <code>lbminidaq2-17</code> as <a href=#use-the-dcb-qa-panel>for the DCB QA</a>): run</p> <pre><code>WCCOAui -proj UTLVTEST -m gedi &amp;
</code></pre> <p>then locate and open the TCM QA panel (in the <code>panels</code> folder).</p> </li> <li> <p>Enter the TCM serial number and then run the TCM QA by clicking <strong><em>Start Test</em></strong></p> <div class="admonition warning"> <p class=admonition-title>QA failure</p> <p>The QA may fail for a number of reasons. As a general note, on any given panel, it is often a good idea to hit the <strong><em>Start Monitoring</em></strong> button, if it exists, especially if you have just altered/restarted something. Other potential fixes include:</p> <ol> <li>Check that you can detect the SCA where the Mini IO cable is connected (should be SCA 0) by opening up the TCB panel (there should be a button on the TCM QA panel to open this). If you cannot detect the SCA, you can try plugging into another slot on the TCB or try power cycling.</li> <li>If the TCM QA fails with a message that it failed at the "Configuring SCA" step, you can try power cycling, playing with the switches on the TCM (in case they weren't properly set), and restarting the GbtServ (<code>pkill -9 GbtServ</code> and <code>GbtServ &amp;</code>). If none of this works, set the TCM aside with a note.</li> <li>If the TCM QA fails with a message that it failed because "ADCs not connected" (or similar), set the TCM aside with a note including the feedback from the QA panel.</li> </ol> </div> </li> </ol> <h3 id=proposed-lvr-nominal-voltages>Proposed LVR nominal voltages</h3> <p>As discussed with Phoebe (but to be altered to account for sense current monitoring issue found while testing), the proposed voltage ranges for the LVR are</p> <table> <thead> <tr> <th>LVR type</th> <th>M <code>VrsR</code></th> <th>M <code>VregR</code></th> <th>S <code>VrsR</code></th> <th>S <code>VregR</code></th> </tr> </thead> <tbody> <tr> <td><code>12A</code></td> <td><span class=arithmatex>\(1.25 \pm 0.03\)</span></td> <td><span class=arithmatex>\(1.4 \pm 0.05\)</span></td> <td>-</td> <td>-</td> </tr> <tr> <td><code>12MSA</code></td> <td><span class=arithmatex>\(1.25 \pm 0.03\)</span></td> <td><span class=arithmatex>\(1.4 \pm 0.05\)</span></td> <td><span class=arithmatex>\(3.7 \pm 0.5\)</span></td> <td><span class=arithmatex>\(1.4 \pm 0.05\)</span></td> </tr> <tr> <td><code>12MS</code></td> <td><span class=arithmatex>\(1.25 \pm 0.03\)</span></td> <td><span class=arithmatex>\(1.4 \pm 0.05\)</span></td> <td><span class=arithmatex>\(3.7 \pm 0.5\)</span></td> <td><span class=arithmatex>\(1.4 \pm 0.05\)</span></td> </tr> <tr> <td><code>15MS</code></td> <td><span class=arithmatex>\(1.52 \pm 0.03\)</span></td> <td><span class=arithmatex>\(1.7 \pm 0.05\)</span></td> <td><span class=arithmatex>\(3.7 \pm 0.5\)</span></td> <td><span class=arithmatex>\(1.7 \pm 0.05\)</span></td> </tr> <tr> <td><code>25A</code></td> <td><span class=arithmatex>\(2.53 \pm 0.03\)</span></td> <td><span class=arithmatex>\(2.84 \pm 0.05\)</span></td> <td>-</td> <td>-</td> </tr> </tbody> </table> <div class="admonition info"> <p class=admonition-title>Nomenclature</p> <ul> <li><code>VrsR</code>: Sense voltage (converted)</li> <li><code>VregR</code>: Output voltage (converted)</li> <li><code>VisR</code>: Sense current (read as a voltage, before conversion)</li> </ul> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <ul> <li>All voltages are in unit "V".</li> <li>These expected values are pre-set in the test panel as default valules, but they remain user-changeable.</li> <li>Since LVR CERN QA doesn't involve a load, all <code>VisR</code> is assumed to be at <span class=arithmatex>\(0.1\)</span>.</li> <li>In <code>12MSA</code> case, all expected voltages for <code>A</code> channels is assumed to be the same as that of the <code>M</code> channels.</li> <li> <p>For slave <code>S</code> channels, the actual sense lines are unconnected. Instead, <code>Master_Vref_Sense_in</code> is connected.</p> <p>(See <a href=https://raw.githubusercontent.com/umd-lhcb/electronic-projects/master/lvr/schematic_lvr.pdf>LVR schematic</a>, p. 4)</p> </li> <li> <p>For <code>S</code> sense lines, as long as it's not <code>rail</code> (5.5 V) or <code>GND</code>, we are fine with it.</p> </li> </ul> </div> <div class="admonition info"> <p class=admonition-title>Info</p> <ul> <li>The <em>Output voltage</em> <code>VregR</code> is the voltaged measured at LVR output connector.</li> <li>When sense line is unconnected, <span class=arithmatex>\(\frac{\text{Sense voltage}}{\text{Output voltage}} = \frac{2000 - 249}{2000} = 0.88\)</span>.</li> </ul> </div> <p>The LVR QA panel (use described <a href=#use-the-lvr-qa-panel>here</a>) will automatically adjust to test the voltages are within these ranges after the LVR type is set in the panel.</p> <h3 id=update-lvr-firmware>Update LVR firmware</h3> <ol> <li> <p>Configure the LVR blue jumpers as shown in here:</p> <p><img alt="LVR FW jumper config" src=../../../lvr/lvr_qa/lvr_jtag.jpg></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>These jumpers need to go back to their original positions after the firmware update. This is need to ensure some FPGA fail-safe is enabled.</p> </div> </li> <li> <p>Connect the LVR input BB and JTAG to LVR according to this picture, and turn on the power:</p> <p><img alt="LVR JTAG" src=../lvr_fw_update.jpg></p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>The GND shold not be connected during the firmware update process.</p> </div> </li> <li> <p>Use the nearby laptop to update the firmware. The flasher should have been opened already and all we need to do is click <strong>PROGRAM</strong>.</p> <p><img alt="LVR FW update prgrammer" src=../lvr_fw_update_program.jpg></p> </li> <li> <p>Once the firmware is updated, turn off the power and remove the input BB and the JTAG. Don't forget to put the blue jumpers back to their original position</p> </li> </ol> <h3 id=install-tcm>Install TCM</h3> <ol> <li> <p>Install the 10 mm standoff, with one washer at bottom and one at top (ie. two washers per standoff):</p> <p><img alt="LVR TCM standoff" src=../lvr_standoff.jpg></p> </li> <li> <p>Align and install the TCM, with the Mini IO cable connected to it (and the TCB)</p> </li> </ol> <h3 id=use-the-lvr-qa-panel>Use the LVR QA panel</h3> <ol> <li>Connect all the CCMs on the LVR according to the board subtype</li> <li>Connect the GND to LVR. See the TCM standoff picture for GND connection.</li> <li>Re-connect the input BB, and turn on the power</li> <li> <p>Launch the LVR CERN QA panel in a terminal:</p> <pre><code>WCCOAui -proj UTLVTEST -p fwTelemetry/QA_LVR.pnl &amp;
</code></pre> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The panel looks like this:</p> <p><img alt="LVR CERN QA panel" src=../lvr_cern_qa_panel.png></p> </div> </li> <li> <p>Input LVR and TCM serial number.</p> </li> <li>Choose the correct LVR type and subtype.</li> <li>Click <strong>RUN TESTS</strong></li> <li> <p>Assuming the board passes, turn the power off and disconnect everything, keeping the TCM and CCMs installed on the LVR</p> <div class="admonition warning"> <p class=admonition-title>QA Failure because of high <code>Vis</code></p> <p>TODO include instructions from Phoebe...</p> </div> </li> <li> <p>In the case of an LVR with MS channels, test that the soldering was done correctly using a multimeter (TODO get a picture of this, and explain in more detail)</p> </li> </ol> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>There's a latch that needs to be released manually when trying to unplug the Mini IO cable.</p> <p><img alt="Mini IO cable" src=../mini_io_connector.jpg></p> </div> <h3 id=installing-lvr-to-sbc>Installing LVR to SBC</h3> <ol> <li>Check that CCMs and TCM are properly installed and sit flat</li> <li> <p>Make sure the wedgelocks are loose, and slide the LVR into the SBC</p> </li> <li> <p>Make sure the wedgelock is locked with specified torque of 80 cNm (7 lb-ft).</p> <div class="admonition info"> <p class=admonition-title>Info</p> <ul> <li>The name of the LVR wedgelock is <a href="https://schroff.nvent.com/en-gb/products/enc40-5-10-b-lf-ln-m?selectionPath=0%7C0%7C0%7C0%7C0%7C0%7C0%7C">Birtcher wedgelock retainer (40-5-12-T)</a></li> <li>The data sheet of the wedgelock can be found <a href=https://schroff.nvent.com/sites/g/files/hdkjer281/files/acquiadam/2020-11/40-5_DataSheet.pdf>here</a></li> </ul> </div> </li> <li> <p>Test the isolation of <code>GND</code> and <code>GND_earth</code> after connecting the <code>GND_earth</code> cables from SBC to LVR.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>This can be done with a multimeter. Fix one probe on SBC, while use the other end to probe on the right-most pin of the right LVR output connector (see picture below).</p> <p><img alt="LVR isolation probe" src=../lvr_output_connector.jpg></p> <p><strong>One LVR only needs to be probed once.</strong></p> </div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The <code>LV_RETURN</code> is connected to <code>GND</code> on LVR, but not the <code>GND_earth</code>.</p> </div> </li> </ol> <div class=footnote> <hr> <ol> <li id=fn:1> <p>Default bias current is 5 mA.&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:2> <p>Some of the hybrids in the slice test Stave are not working, so we can't fully test every elink on DCBs.&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> <li id=fn:3> <p>"Bottom power" refers to power to 2 bottom DCBs and Hybrids that the 2 DCBs connect&#160;<a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">&#8617;</a></p> </li> <li id=fn:4> <p>Flexible Flat Cable. Note that FFC cable would be a tautology.&#160;<a class=footnote-backref href=#fnref:4 title="Jump back to footnote 4 in the text">&#8617;</a></p> </li> </ol> </div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../cern_visual_inspection/cern_visual_inspection/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> CERN visual inspection </div> </div> </a> <a href=../../cern_installation/cern_dcb_depopulation/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> DCB depopulation </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.d351de03.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.a1609d9a.min.js></script> <script src=../../../javascripts/config.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>